(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{100:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r(0),o=r(21),a=r.n(o),u=r(10),s=r(16),i="/",b="/contacts",j="/register",l="/login",O=r(11);var d=function(){var e=Object(u.c)(O.c.getIsAuthenticated);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(s.b,{exact:!0,to:i,className:"NavLink",activeClassName:"NavLink--active",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"}),e&&Object(n.jsx)(s.b,{to:b,className:"NavLink",activeClassName:"NavLink--active",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})};function f(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(s.b,{exact:!0,to:j,className:"NavLink",activeClassName:"NavLink--active",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsx)(s.b,{to:l,className:"NavLink",activeClassName:"NavLink--active",children:"\u0412\u043e\u0439\u0442\u0438"})]})}var h=r(103),g=r(46),p=r.n(g),x=r.p+"static/media/avatar.fc82e31a.png";var v={onLogout:O.a.logout},k=Object(u.b)((function(e){return{getName:O.c.getAuthUserName(e)}}),v)((function(e){var t=e.getName,r=e.onLogout;return Object(n.jsxs)("div",{className:p.a.flex,children:[Object(n.jsx)("img",{src:x,className:p.a.avatar}),Object(n.jsxs)("b",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",t]}),Object(n.jsx)(h.a,{variant:"primary",onClick:r,children:"\u0412\u044b\u0439\u0442\u0438"})]})})),m=r(107),C=r(108);var S=function(){var e=Object(u.c)(O.c.getIsAuthenticated);return Object(n.jsxs)(m.a,{expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(m.a.Brand,{href:"/",children:"Phone book"}),Object(n.jsx)(C.a,{className:"mr-auto",children:Object(n.jsx)(d,{})}),Object(n.jsx)(C.a,{children:e?Object(n.jsx)(k,{}):Object(n.jsx)(f,{})})]})},E=r(8),y=r(104);function N(){return Object(n.jsxs)("div",{style:{width:"100%",height:"150px",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(n.jsx)("h2",{style:{marginRight:"15px"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),Object(n.jsx)(y.a,{animation:"border",role:"status"})]})}var U=r(105),R=r(106),q=r(101),w=r(22),L=r(37),A=function(e){var t=e.component,r=e.redirectTo,c=Object(L.a)(e,["component","redirectTo"]),o=Object(u.c)(O.c.getIsAuthenticated);return Object(n.jsx)(E.b,Object(w.a)(Object(w.a)({},c),{},{render:function(e){return o?Object(n.jsx)(t,Object(w.a)({},e)):Object(n.jsx)(E.a,{to:r})}}))};A.defaultProps={redirectTo:"/"};var T=A,z=function(e){var t=e.component,r=e.redirectTo,c=Object(L.a)(e,["component","redirectTo"]),o=Object(u.c)(O.c.getIsAuthenticated);return Object(n.jsx)(E.b,Object(w.a)(Object(w.a)({},c),{},{render:function(e){return o&&c.restricted?Object(n.jsx)(E.a,{to:r}):Object(n.jsx)(t,Object(w.a)({},e))}}))};z.defaultProps={redirectTo:"/"};var I=z,_=Object(c.lazy)((function(){return r.e(7).then(r.bind(null,117))})),P=Object(c.lazy)((function(){return Promise.all([r.e(3),r.e(4)]).then(r.bind(null,116))})),B=Object(c.lazy)((function(){return r.e(6).then(r.bind(null,118))})),F=Object(c.lazy)((function(){return r.e(5).then(r.bind(null,119))})),J=Object(c.lazy)((function(){return r.e(8).then(r.bind(null,120))}));var M={getCurrentUser:O.a.getCurrentUser},V=Object(u.b)(null,M)((function(e){var t=e.getCurrentUser;return Object(c.useEffect)((function(){t()}),[t]),Object(n.jsx)(U.a,{children:Object(n.jsx)(R.a,{children:Object(n.jsxs)(q.a,{children:[Object(n.jsx)(S,{}),Object(n.jsx)("section",{children:Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)(N,{}),children:Object(n.jsxs)(E.d,{children:[Object(n.jsx)(I,{exact:!0,path:i,component:_}),Object(n.jsx)(T,{path:b,component:P,redirectTo:l}),Object(n.jsx)(I,{path:j,component:B,restricted:!0,redirectTo:b}),Object(n.jsx)(I,{path:l,component:F,restricted:!0,redirectTo:b}),Object(n.jsx)(I,{component:J})]})})})]})})})})),D=r(36),G=r(5),H=r(48),K=r(61),Q=r.n(K),W=r(62),X=r.n(W),Y=r(20),Z=[].concat(Object(D.a)(Object(G.d)({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}})),[X.a]),$={key:"auth",storage:Q.a,whitelist:["token"]},ee=Object(G.a)({reducer:{auth:Object(Y.g)($,O.b),phonebook:H.a},middleware:Z,devTools:!1}),te={store:ee,persistor:Object(Y.h)(ee)},re=r(63);r(98),r(99);a.a.render(Object(n.jsx)(u.a,{store:te.store,children:Object(n.jsx)(re.a,{loading:null,persistor:te.persistor,children:Object(n.jsx)(s.a,{children:Object(n.jsx)(V,{})})})}),document.querySelector("#root"))},11:function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return E})),r.d(t,"c",(function(){return y}));var n,c,o,a,u=r(5),s={registerRequest:Object(u.b)("auth/registerRequest"),registerSuccess:Object(u.b)("auth/registerSuccess"),registerError:Object(u.b)("auth/registerError"),loginRequest:Object(u.b)("auth/loginRequest"),loginSuccess:Object(u.b)("auth/loginSuccess"),loginError:Object(u.b)("auth/loginError"),logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},i=r(4),b=r(17),j={name:null,email:null},l=Object(u.c)(j,(n={},Object(i.a)(n,s.registerSuccess,(function(e,t){return t.payload.user})),Object(i.a)(n,s.loginSuccess,(function(e,t){return t.payload.user})),Object(i.a)(n,s.logoutSuccess,(function(){return j})),Object(i.a)(n,s.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),O=Object(u.c)(null,(c={},Object(i.a)(c,s.registerSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,s.loginSuccess,(function(e,t){return t.payload.token})),Object(i.a)(c,s.logoutSuccess,(function(){return null})),c)),d=function(e,t){return t.payload},f=Object(u.c)(null,(o={},Object(i.a)(o,s.registerError,d),Object(i.a)(o,s.loginError,d),Object(i.a)(o,s.logoutError,d),Object(i.a)(o,s.getCurrentUserError,d),o)),h=Object(u.c)(!1,(a={},Object(i.a)(a,s.registerRequest,(function(){return!0})),Object(i.a)(a,s.loginRequest,(function(){return!0})),Object(i.a)(a,s.logoutRequest,(function(){return!0})),Object(i.a)(a,s.getCurrentUserRequest,(function(){return!0})),Object(i.a)(a,s.registerSuccess,(function(){return!1})),Object(i.a)(a,s.loginSuccess,(function(){return!1})),Object(i.a)(a,s.logoutSuccess,(function(){return!1})),Object(i.a)(a,s.getCurrentUserSuccess,(function(){return!1})),Object(i.a)(a,s.registerError,(function(){return!1})),Object(i.a)(a,s.loginError,(function(){return!1})),Object(i.a)(a,s.logoutError,(function(){return!1})),Object(i.a)(a,s.getCurrentUserError,(function(){return!1})),a)),g=Object(b.b)({user:l,token:O,error:f,lodaing:h}),p=r(19),x=r.n(p),v=r(30),k=r(24),m=r.n(k);m.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var C=function(e){m.a.defaults.headers.common.Authorization="Bearer ".concat(e)},S=function(){m.a.defaults.headers.common.Authorization=""},E={register:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(s.registerRequest()),t.prev=1,t.next=4,m.a.post("/users/signup",e);case 4:n=t.sent,C(n.data.token),r(s.registerSuccess(n.data)),r(s.registerError("")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(s.registerError(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(s.loginRequest()),t.prev=1,t.next=4,m.a.post("/users/login",e);case 4:n=t.sent,C(n.data.token),r(s.loginSuccess(n.data)),r(s.loginError("")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(s.loginError(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.logoutRequest()),e.prev=1,e.next=4,m.a.post("/users/logout");case 4:S(),t(s.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(s.logoutError(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t,r){var n,c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r()),n=r(),c=n.auth.token){e.next=4;break}return e.abrupt("return");case 4:return C(c),t(s.getCurrentUserRequest()),e.prev=6,e.next=9,m.a.get("/users/current");case 9:o=e.sent,t(s.getCurrentUserSuccess(o.data)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t(s.getCurrentUserError(e.t0));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,r){return e.apply(this,arguments)}}()}},y=(r(10),{getIsAuthenticated:function(e){return Boolean(e.auth.token)},getAuthUserName:function(e){return e.auth.user.name},getError:function(e){return e.auth.error},authLoading:function(e){return e.auth.loading}})},12:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return o})),r.d(t,"h",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return j})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return O}));var n=r(5),c=Object(n.b)("phonebook/fetchContactRequest"),o=Object(n.b)("phonebook/fetchContactSuccess"),a=Object(n.b)("phonebook/fetchContactError"),u=Object(n.b)("phonebook/addContactRequest"),s=Object(n.b)("phonebook/addContactSuccess"),i=Object(n.b)("phonebook/addContactError"),b=(Object(n.b)("phonebook/findContactName"),Object(n.b)("phonebook/deleteContactRequest")),j=Object(n.b)("phonebook/deleteContactSuccess"),l=Object(n.b)("phonebook/deleteContactError"),O=Object(n.b)("phonebook/changeFilter")},46:function(e,t,r){e.exports={flex:"UserMenu_flex__1hSV1",avatar:"UserMenu_avatar__2e7Jj"}},48:function(e,t,r){"use strict";var n,c,o=r(4),a=r(36),u=r(5),s=r(17),i=r(12),b=Object(u.c)([],(n={},Object(o.a)(n,i.j,(function(e,t){return t.payload})),Object(o.a)(n,i.c,(function(e,t){var r=t.payload;return[].concat(Object(a.a)(e),[r])})),Object(o.a)(n,i.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),n)),j=Object(u.c)("",Object(o.a)({},i.d,(function(e,t){return t.payload}))),l=Object(u.c)(!1,(c={},Object(o.a)(c,i.i,(function(){return!0})),Object(o.a)(c,i.j,(function(){return!1})),Object(o.a)(c,i.h,(function(){return!1})),Object(o.a)(c,i.b,(function(){return!0})),Object(o.a)(c,i.c,(function(){return!1})),Object(o.a)(c,i.a,(function(){return!1})),Object(o.a)(c,i.f,(function(){return!0})),Object(o.a)(c,i.g,(function(){return!1})),Object(o.a)(c,i.e,(function(){return!1})),c));t.a=Object(s.b)({contacts:b,filter:j,loading:l})},99:function(e,t,r){}},[[100,1,2]]]);
//# sourceMappingURL=main.d37de7d6.chunk.js.map